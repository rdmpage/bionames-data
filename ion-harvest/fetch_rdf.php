<?php

$config['proxy_name'] = 'wwwcache.gla.ac.uk';
$config['proxy_port'] = 8080;

$config['proxy_name'] = '';
$config['proxy_port'] = '';

//require_once(dirname(__FILE__) . '/lsid.php');


//--------------------------------------------------------------------------------------------------
/**
 * @brief Test whether HTTP code is valid
 *
 * HTTP codes 200 and 302 are OK.
 *
 * For JSTOR we also accept 403
 *
 * @param HTTP code
 *
 * @result True if HTTP code is valid
 */
function HttpCodeValid($http_code)
{
	if ( ($http_code == '200') || ($http_code == '302') || ($http_code == '403'))
	{
		return true;
	}
	else{
		return false;
	}
}


//--------------------------------------------------------------------------------------------------
/**
 * @brief GET a resource
 *
 * Make the HTTP GET call to retrieve the record pointed to by the URL. 
 *
 * @param url URL of resource
 *
 * @result Contents of resource
 */
function get($url, $userAgent = '', $timeout = 0)
{
	global $config;
	
	//echo __LINE__ . "\n";
	
	$data = '';
	
	$ch = curl_init(); 
	curl_setopt ($ch, CURLOPT_URL, $url); 
	curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
	curl_setopt ($ch, CURLOPT_FOLLOWLOCATION,	1); 
	//curl_setopt ($ch, CURLOPT_HEADER,		  1);  

	//curl_setopt ($ch, CURLOPT_COOKIEJAR, 'cookie.txt');
	
	if ($userAgent != '')
	{
		curl_setopt($ch, CURLOPT_USERAGENT, $userAgent);
	}	
	
	if ($timeout != 0)
	{
		curl_setopt($ch, CURLOPT_TIMEOUT, $timeout);
	}
	
	/*
	if ($config['proxy_name'] != '')
	{
		curl_setopt ($ch, CURLOPT_PROXY, $config['proxy_name'] . ':' . $config['proxy_port']);
	}
	*/
	
	//echo __LINE__ . "\n";

			
	$curl_result = curl_exec ($ch); 
	
	//echo __LINE__ . "\n";

	
	if (curl_errno ($ch) != 0 )
	{
		echo "CURL error: ", curl_errno ($ch), " ", curl_error($ch);
	}
	else
	{
		$info = curl_getinfo($ch);
		
		//$header = substr($curl_result, 0, $info['header_size']);
		//echo $header;
		
		
		$http_code = $info['http_code'];
		
		//echo "<p><b>HTTP code=$http_code</b></p>";
		
		if (HttpCodeValid ($http_code))
		{
			$data = $curl_result;
		}
	}
	return $data;
}


//4489472-4495625
//4489496 is broken
//for ($id = 4489497; $id < 4495625; $id++)

$base_dir = 'rdf-4530085';
$base_dir = 'rdf';
//$base_dir = 'rdf-archive-missing';

$start 	= 4530085;
$stop 	= 4908000;

$start = 4547396;
$start = 4649753;
$start = 4676479;
$start = 4682543;
$start = 4741916;
$start = 4745029;
$start = 4761927;
$start = 4817587;
$start = 4830009;
$start = 4834416;
$start = 4871756;
$start = 4876654;
$start = 4878904;

$start 	= 4530080;
$stop 	= 4530084;

$start = 4530079;
$start = 4549147;
$start = 4907397;


$start = 4952680;
$stop =  4964990;

$start 	= 4964979;
$start  = 4983247;
$start  = 5015136;
$start 	= 5017858;
$start  = 5050395;
$start  = 5053980;
$start  = 5056687;
$start  = 5099507; 
$stop 	= 5102577;


$start  = 4495670; 
$stop 	= 4499910;


//$start  = 4497104; 
//$stop 	= 4497104;

$start = 5112809;
$stop = 5112809;

$start 	= 5102577;
$start  = 5134363;
$start  = 5138197;
$stop 	= 5148071;

// 2014-07-06
$start = 5148072;
$stop  = 5156350;


$start = 5156345;
$start = 5166359;
$stop  = 5170612;

$start = 4435145;
$stop  = 4435145;


// 2015-02-25
$start = 5170612;
$start = 5171242;
$start = 5189822;
$stop  = 5194353;


$start = 5194354;
$start = 5200144;
$stop  = 5206460;

$start = 5206458;
$stop  = 5215382;

$start = 4501351;
$stop = 4501351;

$start = 4501351;
$stop = 4501351;

// 2015-09-03
$start = 5215383;
$start = 5223854;
$stop  = 5224336;

// 2015-10-16
$start = 5224337;
$start = 5229758;
$start = 5231065;
$stop  = 5237102;

// 2015-11-21
$start = 5237103;
$stop  = 5241771;

// 2016-01-13
$start = 5241772;
$start = 5243325;
$stop  = 5251400;

// 2016-02-16
$start = 5251401;
$start = 5253756;
$stop  = 5256964;

// 2016-03-08
$start = 5256965;
$stop  = 5262017;

// 2017-01-12
$start = 5262018;
$stop  = 5304581;

// 2017-06-01
$start  = 5304582;
$stop 	= 5316348;

// 2017-07-18
$start  = 5316349;
$start  = 5329770;
$stop 	= 5333010;

// 2017-09-28
$start  = 5333010;
$stop 	= 5340753;

// 2017-10-28
$start = 5340754;
$stop  = 5353852;

// 2018-06-19
$start = 5353853;
$start = 5375509;
$stop  = 5376655;


$ids=array();

// 2016 with no publication - redo
// 2017
$ids=array(5318581,
5318706,
5319451,
5319649,
5322765,
5322769,
5322907,
5322999,
5323017,
5323924,
5323981,
5324033,
5324079,
5324301,
5324304,
5324317,
5324327,
5324651,
5326099,
5326766,
5326799,
5326877,
5327148,
5327235,
5327285,
5327301,
5327302,
5327607,
5327641,
5327791,
5327879,
5328143,
5328157,
5328197,
5328304,
5328315,
5329187,
5329855,
5330087,
5330100,
5330225,
5330259,
5330507,
5330623,
5330723,
5330855,
5330901,
5331895,
5332031,
5332088,
5332105,
5332120,
5332186,
5332200,
5332221,
5332585,
5332608,
5332666,
5356029,
5317998,
5318070,
5318074,
5319644,
5322750,
5322858,
5323092,
5323914,
5324044,
5324172,
5324480,
5324664,
5324732,
5325834,
5326334,
5326606,
5326836,
5327018,
5327130,
5327230,
5327260,
5327460,
5328246,
5328252,
5329136,
5330310,
5330416,
5330494,
5330532,
5330610,
5331792,
5332198,
5332452,
5332696,
5318395,
5318600,
5318615,
5318657,
5319119,
5319605,
5319629,
5319647,
5322743,
5323093,
5324249,
5324295,
5324380,
5324505,
5324521,
5324528,
5325813,
5326689,
5326759,
5327135,
5327207,
5327229,
5327245,
5327313,
5327435,
5327522,
5327571,
5327601,
5327722,
5327742,
5327751,
5327845,
5327920,
5327922,
5328168,
5328169,
5328253,
5328393,
5329419,
5329489,
5330059,
5330151,
5330440,
5330442,
5330482,
5331557,
5331599,
5331941,
5332028,
5332206,
5317958,
5319240,
5319248,
5322574,
5323064,
5323096,
5323458,
5324238,
5324312,
5324378,
5324394,
5324534,
5324632,
5324658,
5326796,
5326882,
5326916,
5327138,
5327156,
5327190,
5327276,
5327330,
5327408,
5327452,
5327474,
5327574,
5327576,
5327640,
5327660,
5327860,
5328214,
5330074,
5330276,
5330314,
5330476,
5330514,
5331894,
5318077,
5318408,
5318605,
5318665,
5318723,
5318871,
5319059,
5319309,
5321768,
5322991,
5323766,
5323879,
5323897,
5323903,
5323911,
5324039,
5324281,
5324322,
5324324,
5324471,
5324497,
5324775,
5326320,
5326885,
5327124,
5327289,
5327311,
5327575,
5327647,
5327786,
5327881,
5328183,
5328340,
5328345,
5328395,
5329295,
5329441,
5329487,
5329845,
5330139,
5330341,
5330361,
5330413,
5330441,
5330467,
5330491,
5330520,
5330707,
5330708,
5330815,
5330875,
5330880,
5330881,
5330902,
5331531,
5331542,
5331559,
5331685,
5331699,
5332083,
5332181,
5332199,
5332204,
5332460,
5332461,
5332667,
5332742,
5342853,
5318578,
5319236,
5323886,
5324270,
5324482,
5324714,
5324756,
5326098,
5326470,
5327020,
5327312,
5327426,
5327664,
5327732,
5327870,
5328178,
5328256,
5329400,
5329462,
5330154,
5330410,
5330436,
5332116,
5318402,
5318407,
5319189,
5319227,
5319257,
5319384,
5322297,
5322580,
5322724,
5322733,
5322979,
5322989,
5323387,
5323621,
5323771,
5323889,
5324275,
5324329,
5324611,
5324637,
5324647,
5324675,
5325811,
5326500,
5326761,
5326900,
5327125,
5327227,
5327667,
5327691,
5327709,
5327762,
5327763,
5327823,
5327889,
5327913,
5327919,
5328146,
5328160,
5328161,
5328199,
5328303,
5328309,
5328320,
5329059,
5329395,
5329457,
5329485,
5329493,
5329497,
5329504,
5330004,
5330111,
5330260,
5330311,
5330319,
5330328,
5330377,
5330461,
5330493,
5330522,
5330802,
5331581,
5331625,
5331967,
5332099,
5332182,
5342859,
5375185,
5318690,
5319642,
5324278,
5324466,
5324574,
5324718,
5324772,
5326610,
5327198,
5327266,
5327598,
5327884,
5327896,
5328134,
5328236,
5328280,
5329352,
5330072,
5330190,
5330232,
5330512,
5330816,
5355732,
5317987,
5318008,
5318017,
5318401,
5318693,
5319459,
5321815,
5321817,
5323087,
5323459,
5323926,
5324379,
5324503,
5325095,
5325747,
5326437,
5326502,
5326511,
5326909,
5326923,
5327015,
5327133,
5327137,
5327253,
5327287,
5327503,
5327573,
5327603,
5327708,
5328137,
5328299,
5328333,
5328335,
5328360,
5329151,
5329508,
5329962,
5330269,
5330285,
5330408,
5330439,
5330459,
5330659,
5330807,
5331159,
5331681,
5331697,
5332469,
5332575,
5332648,
5332721,
5364105,
5372942,
5318612,
5319066,
5319440,
5324472,
5327014,
5327258,
5327270,
5327556,
5327578,
5327616,
5327670,
5327898,
5328040,
5328396,
5329272,
5330094,
5330118,
5331678,
5331688,
5332034,
5332092,
5332612,
5366314,
5368818,
5317960,
5318068,
5318582,
5318669,
5318671,
5318689,
5319275,
5319285,
5319391,
5322255,
5322573,
5322728,
5323065,
5324499,
5324769,
5326762,
5327126,
5327142,
5327145,
5327415,
5327517,
5327577,
5327702,
5327819,
5327857,
5327871,
5327967,
5328144,
5328145,
5328177,
5328187,
5328225,
5328227,
5328307,
5328313,
5328397,
5328897,
5328977,
5329305,
5329417,
5329431,
5329433,
5329507,
5329841,
5330119,
5330165,
5330215,
5330301,
5330509,
5330525,
5330671,
5330711,
5330801,
5330839,
5330903,
5331203,
5331539,
5331627,
5331671,
5332020,
5332224,
5332615,
5332644,
5332700,
5376404,
5318072,
5319230,
5319602,
5319620,
5322630,
5322990,
5323076,
5323862,
5323952,
5324272,
5324576,
5324668,
5324672,
5327252,
5327470,
5327482,
5327554,
5327606,
5327638,
5327816,
5328222,
5328264,
5328266,
5328274,
5328288,
5328402,
5329244,
5329398,
5329426,
5330070,
5330092,
5330114,
5330194,
5330596,
5317988,
5318067,
5318393,
5318599,
5318704,
5319613,
5322737,
5322749,
5322997,
5323083,
5323385,
5323455,
5323835,
5323968,
5323983,
5324189,
5324537,
5324591,
5324627,
5324643,
5324671,
5324745,
5324759,
5326595,
5326825,
5327009,
5327257,
5327469,
5327493,
5327505,
5327551,
5327557,
5327562,
5327595,
5327609,
5327643,
5327753,
5327768,
5327861,
5328317,
5328409,
5328971,
5329103,
5329105,
5329339,
5329479,
5329483,
5329851,
5330089,
5330211,
5330257,
5330305,
5330308,
5330345,
5330360,
5330448,
5330487,
5330504,
5330613,
5330811,
5330819,
5330833,
5330845,
5330883,
5331535,
5331540,
5331541,
5331560,
5332024,
5332187,
5332562,
5332679,
5332726,
5352113,
5364505,
5318410,
5319234,
5319356,
5322576,
5322600,
5322734,
5323898,
5324004,
5324594,
5324620,
5324656,
5326758,
5326878,
5326894,
5327118,
5327206,
5327244,
5327396,
5327844,
5329358,
5329932,
5330478,
5330614,
5331232,
5331530,
5331550,
5331668,
5331684,
5332458,
5317615,
5318071,
5318391,
5318573,
5318593,
5318667,
5318702,
5323057,
5323091,
5323935,
5323985,
5324191,
5324315,
5324385,
5324388,
5324566,
5324722,
5324789,
5326471,
5326501,
5326881,
5326927,
5327173,
5327247,
5327389,
5327423,
5327568,
5327675,
5327693,
5327726,
5327760,
5327817,
5328184,
5329145,
5329243,
5329959,
5329960,
5330141,
5330146,
5330149,
5330167,
5330404,
5330721,
5330822,
5330877,
5331562,
5332085,
5332115,
5332607,
5332767,
5370844,
5319258,
5322482,
5322578,
5323000,
5323854,
5323932,
5324036,
5324200,
5324310,
5324474,
5324536,
5324640,
5324646,
5326862,
5327204,
5327434,
5327874,
5327972,
5328064,
5328994,
5329278,
5329374,
5329466,
5329972,
5330292,
5330538,
5330714,
5330832,
5332090,
5332594,
5332674,
5319289,
5319609,
5322497,
5322575,
5322761,
5323029,
5323457,
5323837,
5324231,
5324461,
5324587,
5324641,
5326757,
5326823,
5327128,
5327283,
5327409,
5327473,
5327769,
5328215,
5328281,
5328302,
5328308,
5328902,
5329259,
5329349,
5329368,
5329391,
5329411,
5330140,
5330148,
5330242,
5330313,
5330381,
5330453,
5330501,
5330508,
5330527,
5330820,
5330835,
5331553,
5331571,
5331701,
5331904,
5332035,
5332691,
5332701,
5332760,
5332765,
5355431,
5375186,
5376199,
5318398,
5318876,
5319238,
5322486,
5323830,
5324236,
5324712,
5326798,
5326826,
5326896,
5326996,
5327170,
5327200,
5327552,
5327604,
5327618,
5327668,
5327698,
5328230,
5328242,
5328314,
5329476,
5329910,
5330110,
5330296,
5331532,
5331666,
5331696,
5332174,
5332676,
5344414,
5318404,
5318628,
5318633,
5318679,
5318843,
5319241,
5319333,
5319455,
5319617,
5322577,
5322727,
5323075,
5323077,
5323089,
5323940,
5324047,
5324171,
5324229,
5324308,
5324561,
5324791,
5326315,
5326333,
5326975,
5327122,
5327279,
5327324,
5327471,
5327560,
5327707,
5327747,
5327865,
5328051,
5328182,
5328322,
5328328,
5328347,
5328351,
5329326,
5329327,
5329837,
5329963,
5329967,
5330007,
5330080,
5330155,
5330160,
5330217,
5330255,
5330284,
5330295,
5330346,
5330393,
5330485,
5330622,
5330842,
5332069,
5332184,
5332609,
5332641,
5332646,
5332709,
5376403,
5318710,
5319034,
5319292,
5319296,
5323056,
5323072,
5323456,
5323896,
5324048,
5324240,
5324648,
5324676,
5326338,
5326874,
5326884,
5327178,
5327196,
5327458,
5327600,
5327672,
5329132,
5329422,
5330112,
5330378,
5332078,
5332118,
5318399,
5318400,
5318403,
5318663,
5318675,
5318711,
5318713,
5318715,
5318728,
5321767,
5322726,
5322767,
5323467,
5323917,
5324271,
5324307,
5324363,
5324507,
5324753,
5326469,
5326969,
5327159,
5327291,
5327433,
5327677,
5327805,
5327811,
5327815,
5327829,
5327867,
5327885,
5328167,
5328306,
5328357,
5329109,
5329337,
5329341,
5329361,
5329509,
5329900,
5330113,
5330221,
5330223,
5330303,
5330449,
5330489,
5330537,
5330727,
5330728,
5330824,
5330847,
5330888,
5331151,
5331964,
5332106,
5332108,
5332188,
5332191,
5332587,
5332611,
5332743,
5339909,
5342857,
5376206,
5318592,
5319436,
5323060,
5323062,
5323074,
5323078,
5323080,
5323892,
5324032,
5324390,
5327152,
5327516,
5328042,
5328170,
5328228,
5328330,
5329062,
5329448,
5329478,
5330530,
5330814,
5331690,
5332030,
5332114,
5332176,
5332690,
5318005,
5318397,
5318577,
5318583,
5318722,
5319259,
5319293,
5319297,
5319429,
5319457,
5319461,
5322582,
5322740,
5322773,
5323067,
5323377,
5323847,
5323853,
5323986,
5324035,
5324045,
5324185,
5324245,
5324247,
5324273,
5324563,
5326771,
5326917,
5327146,
5327237,
5327259,
5327299,
5327549,
5327611,
5327923,
5328122,
5328135,
5328140,
5328141,
5328164,
5328165,
5329241,
5329344,
5329397,
5329995,
5330065,
5330265,
5330282,
5330283,
5330293,
5330364,
5330380,
5330406,
5330435,
5330451,
5330506,
5330719,
5330726,
5331205,
5332220,
5332628,
5332653,
5332657,
5332660,
5332763,
5348149,
5365315,
5317616,
5323070,
5323094,
5323516,
5324174,
5324196,
5324248,
5324650,
5326036,
5326870,
5326880,
5327678,
5327822,
5327910,
5328158,
5328232,
5328318,
5330598,
5330612,
5331616,
5331674,
5332178,
5332192,
5364686,
5318069,
5318585,
5318604,
5318659,
5319324,
5321764,
5322493,
5322725,
5323461,
5323465,
5323845,
5323907,
5324077,
5324395,
5324506,
5324517,
5324607,
5324617,
5325817,
5326327,
5326340,
5326760,
5326827,
5326875,
5326883,
5326915,
5327141,
5327269,
5327584,
5327671,
5327739,
5328162,
5328323,
5328329,
5328337,
5328981,
5328983,
5328997,
5329001,
5329137,
5330063,
5330286,
5330535,
5330823,
5331563,
5331901,
5332086,
5332175,
5332189,
5332203,
5332619,
5332625,
5376200,
5318112,
5318574,
5318714,
5318716,
5318718,
5319334,
5319448,
5319454,
5322730,
5323834,
5324484,
5324612,
5325818,
5326770,
5327150,
5327174,
5327790,
5327868,
5327876,
5328138,
5328270,
5329436,
5330116,
5330290,
5331536,
5331676,
5331898,
5332032,
5332456,
5332570,
5317959,
5318006,
5318620,
5318705,
5318721,
5321819,
5322760,
5323081,
5323768,
5323839,
5323906,
5324003,
5324524,
5324588,
5324589,
5324615,
5324755,
5324784,
5326035,
5327305,
5327489,
5327579,
5327599,
5327764,
5327765,
5327897,
5328120,
5328188,
5328327,
5328331,
5328383,
5328899,
5329367,
5329503,
5329839,
5330227,
5330229,
5330281,
5330322,
5330457,
5330475,
5330503,
5330619,
5330821,
5331565,
5331807,
5331951,
5332027,
5332177,
5332201,
5332247,
5332604,
5332662,
5364683,
5368817,
5319042,
5319054,
5322480,
5322850,
5322992,
5323008,
5323086,
5323880,
5324496,
5324516,
5324598,
5325750,
5326690,
5326814,
5327132,
5327238,
5327256,
5327456,
5327710,
5327752,
5327778,
5327818,
5328176,
5328276,
5328394,
5329464,
5329838,
5329846,
5330152,
5330536,
5330672,
5330834,
5331150,
5331158,
5331682,
5331694,
5332596,
5318413,
5322579,
5322739,
5322745,
5323063,
5323831,
5323855,
5323871,
5323919,
5324182,
5324371,
5324475,
5324485,
5324735,
5326326,
5326335,
5326504,
5326887,
5327021,
5327121,
5327597,
5327723,
5327859,
5328221,
5328391,
5328984,
5329140,
5329160,
5329343,
5330002,
5330029,
5330101,
5330129,
5330207,
5330228,
5330288,
5330307,
5330362,
5330469,
5330505,
5330513,
5330817,
5330827,
5330887,
5331199,
5331544,
5331566,
5331593,
5331942,
5332103,
5332104,
5332207,
5332219,
5332683,
5332703,
5352106,
5368731,
5317610,
5318110,
5318590,
5318870,
5319060,
5319070,
5319316,
5323090,
5323894,
5324242,
5324274,
5324276,
5324492,
5324610,
5324774,
5325816,
5326792,
5327236,
5327596,
5327796,
5327882,
5328062,
5328224,
5328998,
5329442,
5330330,
5330810,
5331198,
5331570,
5331576,
5331632,
5332638,
5332734,
5364684,
5318075,
5318411,
5318415,
5318631,
5318725,
5319267,
5319611,
5319625,
5319627,
5321766,
5322766,
5322985,
5323769,
5323843,
5323849,
5324306,
5324321,
5324593,
5324613,
5326342,
5326503,
5326765,
5327147,
5327255,
5327306,
5327307,
5327501,
5327761,
5327841,
5327961,
5328179,
5328325,
5328986,
5329133,
5329300,
5329340,
5330244,
5330247,
5330253,
5330386,
5330463,
5330480,
5330481,
5330722,
5330867,
5331529,
5331661,
5332084,
5332102,
5332179,
5332205,
5332217,
5332589,
5332597,
5332645,
5332669,
5332673,
5332681,
5364106,
5376405,
5318650,
5319396,
5319638,
5321772,
5323084,
5323836,
5323838,
5323850,
5323958,
5324462,
5324490,
5324614,
5324630,
5324758,
5327004,
5327154,
5327310,
5327692,
5327750,
5327820,
5327856,
5327872,
5328268,
5329334,
5329414,
5329454,
5329510,
5329974,
5330254,
5330392,
5331692,
5332698,
5318584,
5318601,
5319053,
5319067,
5319271,
5319313,
5319615,
5319637,
5322495,
5322741,
5322922,
5323079,
5323857,
5323901,
5323904,
5323909,
5324199,
5324201,
5324361,
5324463,
5324487,
5324653,
5324724,
5324747,
5324757,
5324773,
5324782,
5326089,
5326325,
5326508,
5326835,
5326871,
5327019,
5327151,
5327163,
5327249,
5327267,
5327331,
5327553,
5327725,
5327748,
5328139,
5328142,
5328175,
5328191,
5328207,
5328255,
5328348,
5328401,
5328988,
5329304,
5329309,
5329347,
5329359,
5330001,
5330400,
5330455,
5330479,
5330668,
5330702,
5331575,
5331615,
5331673,
5331966,
5332029,
5332197,
5332453,
5332468,
5332571,
5332601,
5332639,
5332687,
5332713,
5363631,
5319226,
5322490,
5322594,
5323030,
5323374,
5323888,
5324670,
5326472,
5326828,
5327000,
5327134,
5327412,
5327472,
5327642,
5328258,
5329150,
5329496,
5330130,
5330376,
5330496,
5331628,
5332096,
5363252,
5317611,
5318586,
5318591,
5318648,
5318735,
5322751,
5322759,
5323009,
5323061,
5323773,
5323900,
5323908,
5324225,
5324564,
5324631,
5324659,
5324661,
5325819,
5326911,
5327013,
5327123,
5327139,
5327157,
5327475,
5327509,
5327673,
5327728,
5327731,
5327735,
5328287,
5328326,
5328361,
5329005,
5329149,
5330061,
5330240,
5330402,
5330427,
5330437,
5330488,
5330602,
5330844,
5330879,
5331561,
5331695,
5331944,
5331945,
5331965,
5332021,
5332101,
5332593,
5332617,
5332623,
5332685,
5332699,
5356344,
5364893,
5318576,
5319062,
5319264,
5319390,
5322714,
5322716,
5322736,
5322772,
5322996,
5323058,
5323856,
5323878,
5323950,
5324028,
5324624,
5324638,
5324730,
5326602,
5327010,
5327620,
5327718,
5327858,
5328216,
5328272,
5328996,
5329004,
5329154,
5329240,
5329248,
5329868,
5330012,
5330894,
5331624,
5317617,
5317961,
5318104,
5318109,
5318575,
5318685,
5318691,
5318707,
5318873,
5319255,
5319291,
5319295,
5319315,
5321763,
5324241,
5324297,
5324389,
5324523,
5324553,
5324665,
5324743,
5326506,
5326837,
5326903,
5326973,
5327303,
5327605,
5327613,
5327706,
5327788,
5328128,
5328217,
5328407,
5328975,
5328985,
5329111,
5329307,
5329328,
5329329,
5329403,
5329519,
5329964,
5329977,
5330169,
5330203,
5330209,
5330251,
5330321,
5330395,
5330409,
5330425,
5330477,
5330497,
5330529,
5330621,
5330724,
5330837,
5330889,
5331155,
5331161,
5331201,
5331547,
5331621,
5331675,
5331700,
5331899,
5331906,
5331943,
5332100,
5332602,
5332695,
5332747,
5372940,
5318012,
5318594,
5318834,
5318872,
5319224,
5319252,
5319604,
5322296,
5323846,
5323934,
5324330,
5324530,
5326596,
5326824,
5326898,
5327226,
5327424,
5327464,
5327674,
5327828,
5329152,
5329372,
5329494,
5330516,
5330616,
5331204,
5331614,
5331888,
5332112,
5332632,
5318588,
5318606,
5318651,
5318673,
5318687,
5319311,
5319449,
5319599,
5321765,
5322746,
5323059,
5323875,
5323881,
5323920,
5323925,
5324501,
5324555,
5324707,
5325742,
5325823,
5326607,
5326811,
5326873,
5326919,
5326924,
5326971,
5326999,
5327271,
5327705,
5327741,
5328343,
5328973,
5328987,
5328999,
5329353,
5329859,
5329913,
5329975,
5330095,
5330213,
5330233,
5330342,
5330366,
5330423,
5330483,
5330499,
5330500,
5330704,
5330803,
5331160,
5331555,
5331587,
5331669,
5331683,
5332067,
5332091,
5332097,
5332455,
5332647,
5332651,
5332682,
5332697,
5318076,
5318692,
5318696,
5319046,
5319056,
5319232,
5319600,
5319626,
5321770,
5322572,
5322756,
5323016,
5323468,
5323470,
5323844,
5323852,
5324038,
5324194,
5326092,
5326468,
5326914,
5327008,
5327608,
5327662,
5327716,
5327836,
5328248,
5328356,
5329000,
5329060,
5329396,
5329866,
5330016,
5330150,
5330294,
5330534,
5330836,
5330872,
5330876,
5331152,
5331534,
5331538,
5331552,
5331610,
5332098,
5332470,
5332598,
5332710,
5317962,
5318101,
5318102,
5318389,
5318681,
5319243,
5319325,
5321771,
5322499,
5322729,
5322735,
5323827,
5323949,
5324184,
5324187,
5324302,
5324328,
5324369,
5324469,
5324605,
5324635,
5324645,
5324657,
5324767,
5325741,
5325748,
5326839,
5327144,
5327153,
5327160,
5327401,
5327508,
5327720,
5327780,
5327825,
5327837,
5327839,
5328041,
5328213,
5328223,
5328305,
5328980,
5328982,
5329346,
5329399,
5329447,
5329506,
5329961,
5330022,
5330153,
5330277,
5330340,
5330401,
5330421,
5330444,
5330471,
5330502,
5330657,
5330660,
5330713,
5330729,
5330841,
5330853,
5331569,
5331885,
5332245,
5332581,
5332680,
5332751,
5351551,
5317612,
5318412,
5319274,
5321774,
5322478,
5323010,
5324552,
5324642,
5326822,
5327848,
5328060,
5328250,
5329402,
5329424,
5329468,
5329864,
5330056,
5330198,
5331680,
5332036,
5332190,
5332218,
5318405,
5318409,
5318589,
5318653,
5318683,
5318703,
5318877,
5319061,
5319343,
5321773,
5322597,
5322742,
5322861,
5322908,
5322913,
5323987,
5324227,
5324243,
5324383,
5324522,
5324649,
5325763,
5326087,
5326687,
5326769,
5327119,
5327127,
5327405,
5327555,
5327593,
5327623,
5327627,
5327645,
5327755,
5327766,
5327883,
5327969,
5328251,
5328319,
5328353,
5328411,
5329505,
5329857,
5330188,
5330391,
5330473,
5330701,
5330717,
5330831,
5330851,
5331902,
5331905,
5331907,
5332107,
5332193,
5332228,
5332591,
5332686,
5332731,
5332741,
5318630,
5319250,
5319268,
5319458,
5319622,
5322488,
5322738,
5323082,
5323088,
5323848,
5323876,
5324738,
5326094,
5327158,
5327406,
5327918,
5328358,
5328398,
5328978,
5329332,
5330230,
5330252,
5331154,
5331660,
5331664,
5332658,
5375060,
5317989,
5318387,
5318579,
5318661,
5318701,
5319253,
5322501,
5323625,
5324031,
5324037,
5324235,
5324326,
5326331,
5327003,
5327131,
5327166,
5327167,
5327188,
5327197,
5327199,
5327201,
5327407,
5327504,
5327625,
5327737,
5327849,
5328257,
5328355,
5330093,
5330117,
5330249,
5330426,
5330511,
5330533,
5330720,
5331937,
5331940,
5332225,
5332244,
5332463,
5332605,
5332677,
5332684,
5356833,
5319450,
5319452,
5319628,
5322298,
5323842,
5324034,
5324178,
5324464,
5324468,
5324644,
5325820,
5326034,
5327246,
5327280,
5327454,
5327812,
5328262,
5329474,
5329842,
5330196,
5330238,
5330318,
5330414,
5330716,
5330852,
5330856,
5331620,
5332194,
5332196,
5332578,
5342852,
5371372,
5318073,
5318388,
5318580,
5318587,
5318602,
5318635,
5319225,
5319601,
5321769,
5323927,
5324029,
5324181,
5324267,
5324386,
5324520,
5324569,
5324621,
5324717,
5324726,
5326033,
5326997,
5327120,
5327149,
5327155,
5327293,
5327295,
5327411,
5327451,
5327580,
5327767,
5327821,
5327968,
5328133,
5328321,
5328359,
5329107,
5329247,
5329345,
5329355,
5329375,
5330088,
5330115,
5330261,
5330424,
5330446,
5330495,
5330593,
5330843,
5330849,
5330871,
5330882,
5332026,
5332213,
5332465,
5332595,
5332719,
5332733,
5332744,
5376409,
5318114,
5319266,
5322476,
5322994,
5323066,
5323466,
5323918,
5324268,
5324662,
5326436,
5326998,
5327250,
5327550,
5327602,
5327850,
5328136,
5328316,
5328972,
5328976,
5329330,
5329516,
5329848,
5330274,
5331596,
5368816,
5317613,
5318595,
5318629,
5318655,
5318677,
5319439,
5322731,
5322747,
5322768,
5322771,
5323877,
5323979,
5324367,
5324473,
5324489,
5326322,
5326763,
5326768,
5327129,
5327140,
5327209,
5327315,
5327502,
5327639,
5327733,
5327771,
5328159,
5328231,
5328341,
5328342,
5329148,
5329331,
5329429,
5329449,
5329901,
5329902,
5330000,
5330071,
5330199,
5330315,
5330379,
5330411,
5330465,
5330531,
5330703,
5330706,
5330873,
5331633,
5331691,
5332033,
5332195,
5332223,
5332723,
5363251,
5319372,
5319394,
5319460,
5322752,
5324030,
5324246,
5324318,
5324470,
5327248,
5327316,
5327610,
5328974,
5329338,
5330192,
5330250,
5330352,
5330374,
5330812,
5330878,
5342856,
5366368,
5372156,
5372161,
5372157,
5372164,
5372158,);

$ids=array();

// 2019-04-10
$start = 5376656;
$start = 5404965;
$stop  = 5429608;


// 2020-01-12
$start  = 5429609;
$stop   = 5484820;

$ids=array(
4347530,
4347539,
4347549,
3723433,
);

// 2020-09-13
$start  = 5484821;
$stop   = 5507236;

// 2020-12-29
$start  = 5507237;
$stop   = 5541544;

// 2021-05-02
$start  = 5541545;
$stop   = 5562819;

// 2021-08-10
$start  = 4500000;
$stop   = 4505000;

// 2022-01-20
$start  = 5562820;
$stop   = 5600541;


$count = 1;

for ($id = $start; $id <= $stop; $id++)
//foreach ($ids as $id)
{
	echo $id . "\n";
	
	$url = 'http://lsid.tdwg.org/urn:lsid:organismnames.com:name:' . $id;
	//$url = 'http://bioguid.info/urn:lsid:organismnames.com:name:' . $id;
	
	
	//echo $url . "\n";
	
	//$xml = get($url);
	
	$lsid = 'urn:lsid:organismnames.com:name:' . $id;
	//$xml = ResolveLSID($lsid);
	
	$url = 'http://organismnames.com:80/authority/metadata/?lsid=' . $lsid;
	
	
	$url = 'http://www.organismnames.com/lsidmetadata.htm?lsid=' . $id;
	
	echo $url . "\n";
	
	$xml = get($url, 'Mozilla/5.0 (iPad; U; CPU OS 3_2_1 like Mac OS X; en-us) AppleWebKit/531.21.10 (KHTML, like Gecko) Mobile/7B405');
	
	echo $xml;
	
	if (substr($xml, 0, 5) != '<?xml')
	{
		//exit();
	}	
	else
	{
			
		$dir = floor($id / 1000);
		
		$dir = dirname(__FILE__) . "/$base_dir/" . $dir;
		if (!file_exists($dir))
		{
			$oldumask = umask(0); 
			mkdir($dir, 0777);
			umask($oldumask);
		}
		
		$f = $dir . '/' . $id . '.xml';
		$file = fopen($f, "w");
		fwrite($file, $xml);
		fclose($file);
	}
	
	if (($count++ % 10) == 0)
	{
		$rand = rand(2000000, 6000000);
    	echo '...sleeping for ' . round(($rand / 1000000),2) . ' seconds' . "\n";
    	usleep($rand);
    }
}



?>